<?xml version="1.0" ?><entry xml:lang="En" xmlns="http://www.w3.org/2005/Atom" xmlns:planet="http://planet.intertwingly.net/"><id>tag:www.maphew.com,2013-01-16:/HowTo/record-internet-radio-with-vlc-updated</id><link href="http://www.maphew.com/HowTo/record-internet-radio-with-vlc-updated/" rel="alternate" type="text/html"/><title xml:lang="En">Record internet radio with VLC, updated</title><content type="xhtml" xml:lang="En"><div xmlns="http://www.w3.org/1999/xhtml"><p>I needed to record a CBC radio piece today. For most cases, it appears
the easiest route is to use <em>streamtuner</em> and <em>streamripper</em>, however
there is something about my particular computer or CBC’s streaming style
that made it difficult for me. Since it took a couple of hours to figure
it all out, I figured I’d better save it for future reference. So here
is a vlc only method which works, but with more clicks and it’s is
easier to select a combination of options that don’t work than do. This
is the combination which finally worked for me:</p>
<ul>
<li>start VLC</li>
<li>File &gt; Open Network Stream</li>
<li>for HTTP/HTTPS/FTP/MMS:
    <a href="http://www.cbc.ca/listen/streams/r1_whitehorse_32.html" title="http://www.cbc.ca/listen/streams/r1_whitehorse_32.html">http://www.cbc.ca/listen/streams/r1_whitehorse_32.html</a></li>
<li>check ’steam/save’, select ‘Settings’, then ‘Outputs’:</li>
<li>check ‘Play Locally’</li>
<li>check ‘File’, set filename as you wish</li>
<li>Encapsulation method: ‘Raw’</li>
<li>check ‘Audio codec’, and select ‘mpga’ from the list, bitrate as you
    like (96kb is okay for this particular stream)</li>
</ul>
<p>It’s the audio codec part which tripped me up the most, even though I
was saving mp3 selecting mp3 as a code yields a 0 byte file.</p>
<p>For command line use, copy the source and destination urls from the
dialogs created above, however it is necessary to change the syntax
somewhat. Namely the <code>:sout</code> option needs to be single quoted.</p>
<blockquote>
<p><code>vlc http://www.cbc.ca/listen/streams/r1_whitehorse_32.htm ‘:sout=#transcode{acodec=mpga,ab=96,channels=2}:duplicate{dst=display,dst=std{access=file,mux=raw,dst=&quot;/home/matt/Radio/cbc-north.mp3&quot;}’</code></p>
</blockquote>
<p>Here is the same in a bash script, you should only need to edit the
INSTREAM and OUTFILE lines to use elsewhere</p>
<blockquote>
<p><code>#!/bin/sh                               NOW=$(date +%F_%k-%M)                               INSTREAM=http://www.cbc.ca/listen/streams/r1_...ehorse_32.html OUTFILE=/home/shared/Audio/Radio/cbc-north_$NOW.mp3                               echo …                               echo …Recording CBC North internet radio to                               echo    $OUTFILE                               echo …expect a 5 second delay before hearing                               anything                               echo …and a few “access_mms” errors prior to that.                               echo …                               /usr/bin/vlc $INSTREAM ‘:sout=#transcode{acodec=mpga,ab=96,channels=2}:duplicate{dst=display,dst=std{access=file,mux=raw,dst=&quot;'$OUTFILE'&quot;}}’</code></p>
</blockquote>
<p><strong>2013-Jan-16</strong>\</p>
<p>Thanks for writing up the howto on the use of headless vlc to capture
streaming audio.\
 \
 It took a little experimentation to make it work on my hardware (an
arm-based pogoplug v4).  I don't know if the changes are due to newer
versions of vlc or pertain more to how it was built for the pacman
database that arch linux uses (the os that's running on my pp4).  Either
way, I thought I'd send what I did your way in case you were interested
in updating/adding to the howto.\</p>
<blockquote>
<p><code>#!/bin/sh                               NOW=$(date +%F_%k-%M)                               INSTREAM=http://www.wwoz.org/listen/lo                               OUTFILE=/home/user1/wwoz_$NOW.                               mp3                               echo                               echo recording WWOZ                               echo                               cvlc $INSTREAM --sout &quot;#transcode{acodec=mpga,ab=96,channels=2}:std{access=file,mux=raw,dst=&quot;$OUTFILE&quot;}&quot;</code>\</p>
</blockquote>
<p>I wound up using cvlc as opposed to vlc so that it wouldn't complain
about dbus access (lack of X11 really).  There's something I have yet to
sort on the output file side as libmp3lame complains &quot;[libmp3lame @
0xb3e80] channel_layout not specified&quot;.  It does record, but what the
exact parameters it writes the file with I haven't yet looked into.\
 \
 Regards,\
 John\
 \
 <em>\&lt;John D. Doyle III&gt;</em></p>
<hr/>
<p>Sources:</p>
<ul>
<li><a href="http://ubuntuforums.org/showpost.php?p=4447337" title="http://ubuntuforums.org/showpost.php?p=4447337">HOWTO: StreamTuner + StreamRipper, another way to get
    music</a></li>
<li><a href="http://www.linux.com/articles/43721" title="http://www.linux.com/articles/43721">Building an Internet radio recorder with VLC
    Player</a><a href="http://www.linux.com/articles/43721" title="http://www.linux.com/articles/43721">\
    </a></li>
<li><a href="http://forum.videolan.org/viewtopic.php?f=4&amp;t=40822" title="http://forum.videolan.org/viewtopic.php?f=4&amp;t=40822">Command line HTTP/File stream: nothing to
    play</a></li>
</ul></div></content><updated planet:format="January 16, 2013 08:00 AM">2013-01-16T08:00:00Z</updated><category term="howto"/><author><name>matt wilkie</name><email>maphew+website@gmail.com</email><uri>http://www.maphew.com/</uri></author><source><id>tag:www.maphew.com,2011-06-11:/atom/</id><icon>http://www.maphew.com/favicon.ico</icon><logo>http://www.maphew.com/feed-logo.png</logo><author><name>matt wilkie</name><email>maphew+website@gmail.com</email><uri>http://www.maphew.com/</uri></author><link href="http://www.maphew.com/" rel="alternate" type="text/html"/><link href="http://www.maphew.com/atom/" rel="self" type="application/atom+xml"/><title xml:lang="En">a hewer of maps</title><updated planet:format="May 17, 2013 08:54 AM">2013-05-17T08:54:00Z</updated><planet:format>atom10</planet:format><planet:http_etag>&quot;2699bcc-1a063-4ec5e8c135200&quot;</planet:http_etag><planet:http_last_modified>Sat, 30 Nov 2013 05:52:08 GMT</planet:http_last_modified><planet:bozo>true</planet:bozo><planet:activity_threshold>0</planet:activity_threshold><planet:facewidth>65</planet:facewidth><planet:faceheight>85</planet:faceheight><planet:http_status>200</planet:http_status></source></entry>